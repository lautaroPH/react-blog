(this["webpackJsonpblog-app"]=this["webpackJsonpblog-app"]||[]).push([[0],{25:function(e,t,a){},36:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(21),s=a.n(r),o=a(3),i=a(10),l=a(4),u=a(5),d=a.n(u),j=a(8),b="https://blog-react-backend-lautaro.herokuapp.com/api",p=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",n="".concat(b,"/").concat(e);return"GET"===a?fetch(n):fetch(n,{method:a,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},m=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",n="".concat(b,"/").concat(e),c=localStorage.getItem("token")||"";return"GET"===a?fetch(n,{method:a,headers:{"x-token":c}}):fetch(n,{method:a,headers:{"Content-type":"application/json","x-token":c},body:JSON.stringify(t)})},O="[auth] Finish Checking login state",h="[auth] Login",f="[auth] Logout",x="[ui] open modal",v="[ui] close modal",g="[page] one more page",N="[page] one more user page",y="[post] new post",k="[ui] open delete modal",w="[ui] close delete modal",P="[ui] open comment modal",C="[ui] close comment modal",_="[search] searcg failed",E="[post] has next page",S="[Post] Add new",L="[Post] post updated",D="[Post] post deleted",T="[Post] post store deleted",I="[Post] Add loaded",M="[Post] Add more loaded",q="[Post] Add one loaded",A="[Post] Failed loaded",Y="[Post] Failed detail loaded",z="[Blog] clean blog logout",R="[Comment] Add new",F="[Comment] active comment",B="[Comment] desactive comment",U="[Comment] comment updated",G="[Comment] comment deleted",H=a(7),J=a.n(H),V=a(2),X=a(15),Z=a.n(X),$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return Object(V.a)(Object(V.a)({},e),{},{created_at:Z()(e.created_at).toDate(),updated_at:Z()(e.updated_at).toDate()})}))},K=function(e){return{type:S,payload:e}},Q=function(e){return{type:L,payload:e}},W=function(){return{type:T}},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){var t=Object(j.a)(d.a.mark((function t(a){var n,c,r,s,o,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,0!==e){t.next=11;break}return t.next=4,p("posts");case 4:return n=t.sent,t.next=7,n.json();case 7:(c=t.sent).ok?(r=$(c.posts),a(ce(c.hasNextPage)),a(re(r))):a(le()),t.next=18;break;case 11:return t.next=13,p("posts/".concat(e));case 13:return s=t.sent,t.next=16,s.json();case 16:(o=t.sent).ok?(i=$(o.posts),a(ce(o.hasNextPage)),a(ie(i))):a(le());case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(0),console.log(t.t0);case 23:case"end":return t.stop()}}),t,null,[[0,20]])})));return function(e){return t.apply(this,arguments)}}()},te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(){var a=Object(j.a)(d.a.mark((function a(n){var c,r,s,o,i,l;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,0!==t){a.next=11;break}return a.next=4,p("posts/user-posts/".concat(e));case 4:return c=a.sent,a.next=7,c.json();case 7:(r=a.sent).ok?(s=$(r.posts.docs),n(ce(r.posts.hasNextPage)),n(re(s))):(n(le()),n(ne())),a.next=18;break;case 11:return a.next=13,p("posts/user-posts/".concat(e,"/").concat(t));case 13:return o=a.sent,a.next=16,o.json();case 16:(i=a.sent).ok?(l=$(i.posts.docs),n(ce(i.posts.hasNextPage)),n(ie(l))):n(le());case 18:a.next=23;break;case 20:a.prev=20,a.t0=a.catch(0),console.log(a.t0);case 23:case"end":return a.stop()}}),a,null,[[0,20]])})));return function(e){return a.apply(this,arguments)}}()},ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(){var a=Object(j.a)(d.a.mark((function a(n){var c,r,s,o,i,l;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,0!==t){a.next=11;break}return a.next=4,p("posts/search/".concat(e));case 4:return c=a.sent,a.next=7,c.json();case 7:(r=a.sent).ok?(s=$(r.posts.docs),n(ce(r.posts.hasNextPage)),n(re(s))):(n(se()),J.a.fire("No hay posts encontrados por:",e,"error")),a.next=18;break;case 11:return a.next=13,p("posts//search/".concat(e,"/").concat(t));case 13:return o=a.sent,a.next=16,o.json();case 16:(i=a.sent).ok?(l=$(i.posts.docs),n(ce(i.posts.hasNextPage)),n(ie(l))):n(le());case 18:a.next=23;break;case 20:a.prev=20,a.t0=a.catch(0),console.log(a.t0);case 23:case"end":return a.stop()}}),a,null,[[0,20]])})));return function(e){return a.apply(this,arguments)}}()},ne=function(){return{type:Y}},ce=function(e){return{type:E,payload:e}},re=function(e){return{type:I,payload:e}},se=function(){return{type:_}},oe=function(){return{type:T}},ie=function(e){return{type:M,payload:e}},le=function(){return{type:A}},ue=function(e){return{type:g,payload:e+1}},de=function(e){return{type:q,payload:e}},je=function(e){return{type:R,payload:e}},be=function(e){return{type:F,payload:e}},pe=function(e){return{type:U,payload:e}},me=function(e){return{type:G,payload:e}},Oe=function(){return function(e){localStorage.clear(),e(he()),e({type:z})}},he=function(){return{type:f}},fe=function(){return{type:O}},xe=function(e){return{type:h,payload:e}},ve=a(9),ge=a(17),Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(n.useState)(e),a=Object(ve.a)(t,2),c=a[0],r=a[1],s=function(){r(e)},o=function(e){var t=e.target;r(Object(V.a)(Object(V.a)({},c),{},Object(ge.a)({},t.name,t.value)))};return[c,o,s]},ye=(a(36),a(0)),ke=function(){var e=Object(o.b)(),t=Ne({email:"",password:""}),a=Object(ve.a)(t,2),n=a[0],c=a[1],r=n.email,s=n.password;return Object(ye.jsx)("div",{className:"login-body-div",children:Object(ye.jsxs)("div",{className:"login-div",children:[Object(ye.jsx)("div",{className:"logo"}),Object(ye.jsx)("div",{className:"titulo",children:"Ingreso"}),Object(ye.jsx)("div",{className:"subtitulo",children:"Incia sesion para entrar al blog"}),Object(ye.jsxs)("div",{className:"campos",children:[Object(ye.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(function(e,t){return function(){var a=Object(j.a)(d.a.mark((function a(n){var c,r;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p("auth",{email:e,password:t},"POST");case 2:return c=a.sent,a.next=5,c.json();case 5:(r=a.sent).ok?(localStorage.setItem("token",r.token),localStorage.setItem("token-init-date",(new Date).getTime()),n(xe({uid:r.uid,name:r.name,surname:r.surname}))):J.a.fire("Error",r.msg,"error");case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(r,s))},children:[Object(ye.jsx)("div",{className:"usuario",children:Object(ye.jsx)("input",{type:"email",className:"input-usuario input-login",placeholder:"Correo",name:"email",value:r,onChange:c,pattern:"[a-z0-9._%+-]+@[a-z09.-]+\\.[a-z]{2,4}$",required:!0})}),Object(ye.jsx)("div",{className:"contrase\xf1a",children:Object(ye.jsx)("input",{type:"password",className:"input-pass input-login",placeholder:"Contrase\xf1a",name:"password",value:s,onChange:c,required:!0})}),Object(ye.jsx)("input",{type:"submit",className:"boton",value:"Login"})]}),Object(ye.jsx)("div",{className:"link",children:Object(ye.jsx)(i.b,{to:"/react-blog/auth/register",children:"Registrar"})})]})]})})},we=function(){var e=Object(o.b)(),t=Ne({name:"",surname:"",email:"",password:"",password2:""}),a=Object(ve.a)(t,2),n=a[0],c=a[1],r=n.name,s=n.surname,l=n.email,u=n.password,b=n.password2;return Object(ye.jsx)("div",{className:"login-body-div",children:Object(ye.jsxs)("div",{className:"register-div",children:[Object(ye.jsx)("div",{className:"logo"}),Object(ye.jsx)("div",{className:"titulo",children:"Registro"}),Object(ye.jsx)("div",{className:"subtitulo",children:"Registrate para entrar al blog"}),Object(ye.jsxs)("div",{className:"campos",children:[Object(ye.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),u!==b)return J.a.fire("Error","Las contrase\xf1as deben de ser iguales","error");e(function(e,t,a,n){return function(){var c=Object(j.a)(d.a.mark((function c(r){var s,o;return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,p("auth/register",{email:e,password:t,name:a,surname:n},"POST");case 2:return s=c.sent,c.next=5,s.json();case 5:(o=c.sent).ok?(localStorage.setItem("token",o.token),localStorage.setItem("token-init-date",(new Date).getTime()),r(xe({uid:o.uid,name:o.name,surname:o.surname}))):J.a.fire("Error",o.msg,"error");case 7:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}(l,u,r,s))},children:[Object(ye.jsx)("div",{className:"usuario",children:Object(ye.jsx)("input",{type:"text",className:"input-usuario input-login",placeholder:"Nombre",name:"name",value:r,onChange:c,pattern:"[a-zA-Z]+",required:!0})}),Object(ye.jsx)("div",{className:"usuario",children:Object(ye.jsx)("input",{type:"text",className:"input-usuario input-login",placeholder:"Apellidos",name:"surname",value:s,onChange:c,pattern:"[a-zA-Z]+",required:!0})}),Object(ye.jsx)("div",{className:"usuario",children:Object(ye.jsx)("input",{type:"email",className:"input-usuario input-login",placeholder:"Correo",name:"email",value:l,onChange:c,pattern:"[a-z0-9._%+-]+@[a-z09.-]+\\.[a-z]{2,4}$",required:!0})}),Object(ye.jsx)("div",{className:"contrase\xf1a",children:Object(ye.jsx)("input",{type:"password",className:"input-pass input-login",placeholder:"Contrase\xf1a",name:"password",value:u,onChange:c,required:!0})}),Object(ye.jsx)("div",{className:"contrase\xf1a",children:Object(ye.jsx)("input",{type:"password",className:"input-pass input-login",placeholder:"Repita la contrase\xf1a",name:"password2",value:b,onChange:c,required:!0})}),Object(ye.jsx)("input",{type:"submit",className:"boton",value:"Registrarse"})]}),Object(ye.jsx)("div",{className:"link",children:Object(ye.jsx)(i.b,{to:"/react-blog/auth/login",children:"Logueate"})})]})]})})},Pe=function(){return Object(ye.jsxs)(l.d,{children:[Object(ye.jsx)(l.b,{exact:!0,path:"/react-blog/auth/login",component:ke}),Object(ye.jsx)(l.b,{exact:!0,path:"/react-blog/auth/register",component:we}),Object(ye.jsx)(l.a,{to:"/react-blog/auth/login"})]})},Ce=function(){return{type:x}},_e=function(){return{type:k}},Ee=function(){return{type:w}},Se=function(){return{type:P}},Le=a(18),De=a.n(Le),Te=function(){var e=Object(j.a)(d.a.mark((function e(t){var a,n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.cloudinary.com/v1_1/dv1ksnrvk/upload",(a=new FormData).append("upload_preset","react-blog"),a.append("file",t),e.prev=4,e.next=7,fetch("https://api.cloudinary.com/v1_1/dv1ksnrvk/upload",{method:"POST",body:a});case 7:if(!(n=e.sent).ok){e.next=15;break}return e.next=11,n.json();case 11:return c=e.sent,e.abrupt("return",c.secure_url);case 15:J.a.fire("Error","Porfavor sube una imagen","error");case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(4),J.a.fire("Error",e.t0,"error");case 21:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),Ie={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};De.a.setAppElement("#root");var Me={title:"",description:"",url:""},qe=function(){var e=Object(o.c)((function(e){return e.ui})).modalOpen,t=Object(o.c)((function(e){return e.blog})).activePost,a=Object(o.b)(),c=Object(n.useState)(!0),r=Object(ve.a)(c,2),s=r[0],i=r[1],l=Object(n.useState)(!0),u=Object(ve.a)(l,2),b=u[0],p=u[1],O=Object(n.useState)(!0),h=Object(ve.a)(O,2),f=h[0],x=h[1],g=Object(n.useState)(Me),N=Object(ve.a)(g,2),y=N[0],k=N[1],w=y.title,P=y.description,C=y.url;Object(n.useEffect)((function(){k(t||Me)}),[t]);var _=function(){a({type:v}),t||k(Me)},E=function(e){var t=e.target;k(Object(V.a)(Object(V.a)({},y),{},Object(ge.a)({},t.name,t.value)))},S=function(){var e=Object(j.a)(d.a.mark((function e(t){var a,n,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.files[0],c=null===n||void 0===n||null===(a=n.name)||void 0===a?void 0:a.split(".").pop()){e.next=4;break}return e.abrupt("return",null);case 4:if("png"!==c&&"jpg"!==c&&"jpge"!==c&&"gif"!==c&&"webp"!==c){e.next=13;break}return J.a.fire({title:"Cargando...",text:"Porfavor espere...",allowOutsideClick:!1,showConfirmButton:!1,willOpen:function(){J.a.showLoading()}}),e.next=8,Te(n);case 8:r=e.sent,k(Object(V.a)(Object(V.a)({},y),{},{url:r})),J.a.close(),e.next=14;break;case 13:J.a.fire("Error","Porfavor sube una imagen","error");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ye.jsx)(ye.Fragment,{children:Object(ye.jsxs)(De.a,{isOpen:e,onRequestClose:_,style:Ie,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-fondo",children:[Object(ye.jsx)("h1",{className:"mt-4",children:t?"Editar post":"Nuevo post"}),Object(ye.jsx)("hr",{}),Object(ye.jsxs)("form",{onSubmit:function(e){return e.preventDefault(),w.trim().length<2?i(!1):P.trim().length<30?p(!1):C.trim().length<5?x(!1):(a(t?(n=y,function(){var e=Object(j.a)(d.a.mark((function e(t){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m("posts/".concat(n.id),n,"PUT");case 3:return a=e.sent,e.next=6,a.json();case 6:(c=e.sent).ok?(t(Q(n)),J.a.fire("Se ha actualizado correctamente: ",n.title,"info")):J.a.fire("Error",c.msg,"error"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()):function(e){return function(){var t=Object(j.a)(d.a.mark((function t(a,n){var c,r,s,o,i,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n().auth,r=c.uid,s=c.name,o=c.surname,t.prev=1,t.next=4,m("posts",e,"POST");case 4:return i=t.sent,t.next=7,i.json();case 7:(l=t.sent).ok&&(e.id=l.post.id,e.user={_id:r,name:s,surname:o},a(K(e)),J.a.fire("Se ha creado: ",e.title,"success")),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(y)),_(),i(!0),p(!0),void x(!0));var n},className:"container",children:[Object(ye.jsxs)("div",{className:"form-group",children:[Object(ye.jsx)("label",{children:"Titulo"}),Object(ye.jsx)("input",{type:"text",className:"form-control ".concat(!s&&"is-invalid"),placeholder:"T\xedtulo del post",name:"title",value:w,autoComplete:"off",onChange:E,required:!0}),!s&&Object(ye.jsx)("small",{id:"emailHelp",className:"form-text text-danger",children:"El titulo debe ser mas largo"})]}),Object(ye.jsxs)("div",{className:"form-group",children:[Object(ye.jsx)("label",{children:"Descripcion"}),Object(ye.jsx)("textarea",{className:"form-control textarea ".concat(!b&&"is-invalid"),placeholder:"Descripcion del evento",name:"description",value:P,rows:"9",onChange:E,required:!0}),!b&&Object(ye.jsx)("small",{id:"emailHelp",className:"form-text text-danger",children:"La descripcion debe ser mas largo"})]}),Object(ye.jsxs)("div",{className:"div_file form-group",children:[Object(ye.jsx)("p",{id:"texto",children:"Subir imagen"}),Object(ye.jsx)("input",{id:"fileSelector",type:"file",className:"file_btn form-control",name:"url",onChange:S,accept:"image/*"}),!f&&Object(ye.jsx)("small",{id:"emailHelp",className:"form-text text-danger",children:"La imagen es obligatoria"})]}),C.length>0&&Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)("img",{src:C,alt:w,className:"img-new-post"}),Object(ye.jsx)("br",{})]}),Object(ye.jsxs)("button",{type:"submit",className:"btn btn-success mt-3",children:[Object(ye.jsx)("i",{className:"far fa-save"}),Object(ye.jsx)("span",{className:"ml-2",children:"Guardar"})]})]})]})})},Ae={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",transform:"translate(-50%, -50%)"}};De.a.setAppElement("#root");var Ye={content:""},ze=function(){var e=Object(o.c)((function(e){return e.ui})).modalCommentOpen,t=Object(o.c)((function(e){return e.blog})),a=t.activePost,c=t.activeComment,r=Object(o.b)(),s=Object(n.useState)(!0),i=Object(ve.a)(s,2),l=i[0],u=i[1],b=Object(n.useState)(Ye),p=Object(ve.a)(b,2),O=p[0],h=p[1],f=O.content;Object(n.useEffect)((function(){h(c||Ye)}),[c]);var x=function(){r({type:C}),h(Ye),c&&r({type:B})};return Object(ye.jsxs)(De.a,{isOpen:e,onRequestClose:x,style:Ae,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-fondo",children:[Object(ye.jsx)("h1",{className:"mt-4",children:c?"Editar comentario":"Nuevo comentario"}),Object(ye.jsx)("hr",{}),Object(ye.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),f.trim().length<2)return u(!1);var t,n,s,o;r(c?(s=O,o=null===c||void 0===c?void 0:c._id,function(){var e=Object(j.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m("comments/".concat(o),s,"PUT");case 3:return a=e.sent,e.next=6,a.json();case 6:(n=e.sent).ok?(t(pe(n.postUpdate)),J.a.fire("Se ha actualizado correctamente el comentario","","info")):J.a.fire("Error",n.msg,"error"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()):(t=O,n=a.id,function(){var e=Object(j.a)(d.a.mark((function e(a,c){var r,s,o,i,l,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c().auth,s=r.uid,o=r.name,i=r.surname,e.prev=1,e.next=4,m("comments/".concat(n),t,"POST");case 4:return l=e.sent,e.next=7,l.json();case 7:(u=e.sent).ok&&(t.user={_id:s,name:o,surname:i},a(je(u.post)),J.a.fire("Se ha creado el comentario exitosamente","","success")),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,a){return e.apply(this,arguments)}}())),x(),u(!0)},className:"container",children:[Object(ye.jsxs)("div",{className:"form-group",children:[Object(ye.jsx)("label",{children:"Contenido"}),Object(ye.jsx)("textarea",{className:"form-control textarea  ".concat(!l&&"is-invalid"),placeholder:"Contenido del comentario",name:"content",value:f,rows:"20",onChange:function(e){var t=e.target;h(Object(V.a)(Object(V.a)({},O),{},Object(ge.a)({},t.name,t.value)))},required:!0}),!l&&Object(ye.jsx)("small",{id:"emailHelp",className:"form-text text-danger",children:"EL contenido debe ser mas largo"})]}),Object(ye.jsxs)("button",{type:"submit",className:"btn btn-success mt-3",children:[Object(ye.jsx)("i",{className:"far fa-save"}),Object(ye.jsx)("span",{className:"ml-2",children:"Guardar"})]})]})]})},Re=(a(25),{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",transform:"translate(-2%, -160%)"}}),Fe=function(){var e=Object(o.c)((function(e){return e.ui})).modalDeleteOpen,t=Object(o.c)((function(e){return e.blog})).activeComment,a=Object(o.b)(),n=Object(l.g)(),c=function(){a(Ee())};return Object(ye.jsxs)(De.a,{isOpen:e,onRequestClose:c,style:Re,closeTimeoutMS:200,className:"modal-delete",overlayClassName:"modal-fondo",children:[Object(ye.jsx)("h2",{className:"mb-3",children:t?"\xbfEst\xe1s Seguro que deseas eliminar este comentario?":"\xbfEst\xe1s Seguro que deseas eliminar este post?"}),Object(ye.jsx)("button",{className:"btn btn-danger mr-4",onClick:function(){t?a(function(){var e=Object(j.a)(d.a.mark((function e(t,a){var n,c,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().blog.activePost.id,c=a().blog.activeComment._id,e.prev=2,e.next=5,m("comments/".concat(n,"/").concat(c),{},"DELETE");case 5:return r=e.sent,e.next=8,r.json();case 8:(s=e.sent).ok?(t(me(s.post)),J.a.fire("El comentario se ha eliminado correctamente","","warning")):J.a.fire("Error",s.msg,"error"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,a){return e.apply(this,arguments)}}()):(a(function(){var e=Object(j.a)(d.a.mark((function e(t,a){var n,c,r,s,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().blog.activePost,c=n.id,r=n.title,e.prev=1,e.next=4,m("posts/".concat(c),{},"DELETE");case 4:return s=e.sent,e.next=7,s.json();case 7:(o=e.sent).ok?(t(W()),J.a.fire("Se ha eliminado correctamente",r,"warning")):J.a.fire("Error",o.msg,"error"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,a){return e.apply(this,arguments)}}()),n.push("/react-blog/")),a(Ee())},children:"S\xed"}),Object(ye.jsx)("button",{className:"btn btn-secondary",onClick:c,children:"No"})]})},Be=function(){var e,t,a,c=Object(o.c)((function(e){return e.auth})).uid,r=Object(o.c)((function(e){return e.blog})),s=r.activePost,i=r.activePostloading,u=Object(o.b)(),b=Object(l.h)();b.pathname.split("/")[2]&&localStorage.setItem("postId",b.pathname.split("/")[2]);var m=Object(l.g)();Object(n.useEffect)((function(){u(oe)}),[u]);var O=localStorage.getItem("postId")||"";Object(n.useEffect)((function(){null===s&&""!==O&&u(function(e){return function(){var t=Object(j.a)(d.a.mark((function t(a){var n,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p("posts/detail/".concat(e));case 3:return n=t.sent,t.next=6,n.json();case 6:(c=t.sent).ok?a(de(c.post)):(a(le()),a(ne()),J.a.fire("Error","No existe el post buscado","error")),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(O))}),[u,O,s]),i||m.push("/react-blog/");var h=Z()(null===s||void 0===s?void 0:s.created_at),f=null===s||void 0===s?void 0:s.comments,x=Z()(null===f||void 0===f?void 0:f.created_at);return Object(ye.jsxs)("div",{children:[null===s?Object(ye.jsx)("div",{className:"d-flex justify-content-center",children:Object(ye.jsx)("div",{className:"spinner-border m-5",role:"status",children:Object(ye.jsx)("span",{className:"sr-only",children:"Loading..."})})}):Object(ye.jsxs)("div",{className:"container overflow-hidden",children:[Object(ye.jsxs)("div",{className:"animate__animated animate__backInDown",children:[Object(ye.jsx)("h2",{className:"mt-3",children:null===s||void 0===s?void 0:s.title}),Object(ye.jsx)("hr",{}),Object(ye.jsxs)("div",{className:"row align-items-start r-responsive",children:[Object(ye.jsxs)("p",{className:"p-post-one col",children:[Object(ye.jsxs)("span",{className:"badge badge-primary",children:[null===s||void 0===s||null===(e=s.user)||void 0===e?void 0:e.name," ",null===s||void 0===s||null===(t=s.user)||void 0===t?void 0:t.surname]}),Object(ye.jsx)("span",{className:"badge badge-light ml-2 date",children:h.format("Do MMMM YYYY")})]}),Object(ye.jsx)("button",{className:"btn btn-sm btn-success mr-3 mt-1 col-2 buton-left-margin",onClick:function(){m.push("/react-blog/perfil/".concat(s.user._id))},children:"Ver perfil"}),(null===s||void 0===s||null===(a=s.user)||void 0===a?void 0:a._id)===c&&Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsxs)("button",{className:"btn btn-sm btn-warning mr-3 mt-1 col-2",onClick:function(){u(Ce())},children:[Object(ye.jsx)("i",{className:"fas fa-edit"})," Editar"]}),Object(ye.jsxs)("button",{className:"btn btn-sm btn-danger mr-3 mt-1 col-2",onClick:function(){u(_e())},children:[Object(ye.jsx)("i",{className:"fas fa-trash"})," Eliminar"]})]})]}),Object(ye.jsx)("hr",{})]}),Object(ye.jsx)("img",{className:"img-post animate__animated animate__backInRight",src:null===s||void 0===s?void 0:s.url,alt:null===s||void 0===s?void 0:s.title}),Object(ye.jsx)("p",{className:"description lead animate__animated animate__backInLeft",children:null===s||void 0===s?void 0:s.description}),Object(ye.jsx)("div",{className:"clearfix"})]}),Object(ye.jsx)(qe,{}),Object(ye.jsx)(Fe,{}),Object(ye.jsxs)("div",{className:"container",children:[s&&Object(ye.jsxs)("div",{className:"animate__animated animate__backInUp",children:[Object(ye.jsx)("hr",{}),Object(ye.jsx)("h2",{children:"Comentarios"}),Object(ye.jsx)("button",{className:"btn btn-outline-primary mt-2",onClick:function(){u(Se())},children:"Comentar"})]}),0===(null===f||void 0===f?void 0:f.length)&&s?Object(ye.jsx)("h5",{className:"mt-3 mb-4 animate__animated animate__backInUp",children:"No hay comentario en este post, prueba comentar uno"}):null===f||void 0===f?void 0:f.map((function(e){var t,a,n;return Object(ye.jsx)("ul",{className:"list-group list-comments mt-4 animate__animated animate__fadeIn animate__delay-1s",children:Object(ye.jsxs)("li",{className:"list-group-item comment-item overflow-hidden",children:[Object(ye.jsx)("span",{className:"badge badge-primary",children:(null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.name)+" "+(null===e||void 0===e||null===(a=e.user)||void 0===a?void 0:a.surname)}),Object(ye.jsx)("span",{className:"badge badge-light ml-2",children:x.format("Do MMMM YYYY")}),Object(ye.jsx)("span",{className:"d-block",children:null===e||void 0===e?void 0:e.content}),(null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n._id)===c&&Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)("button",{className:"btn btn-sm btn-danger float-right",onClick:function(){return u(be(e),u(_e()))},children:"Borrar"}),Object(ye.jsx)("button",{className:"btn btn-sm btn-warning mr-2 float-right",onClick:function(){return u(be(e),u(Se()))},children:"Editar"})]})]})},e._id)}))]}),Object(ye.jsx)(ze,{})]})},Ue=(a(78),function(e){var t=e.id,a=e.title,n=e.description,c=e.created_at,r=e.user,s=Z()(c);return Object(ye.jsxs)("div",{className:"posts-box animate__animated animate__fadeInUp",children:[Object(ye.jsx)("h2",{children:a}),Object(ye.jsxs)("p",{className:"post-user-date",children:[r.name," ",r.surname," - ",s.format("Do MMMM YYYY")]}),Object(ye.jsx)("p",{className:"post-description",children:n}),Object(ye.jsx)(i.b,{to:"/react-blog/post/".concat(t),className:"post-link btn",children:"Leer m\xe1s"})]})}),Ge=a(19),He=function(){var e=Object(o.c)((function(e){return e.blog})),t=e.posts,a=e.postPage,c=e.postNew,r=e.hasNextPage,s=Object(o.b)();Object(n.useEffect)((function(){0===t.length&&s(ee())}),[s,t]),Object(n.useEffect)((function(){a>=2&&s(ee(a))}),[s,a]),Object(n.useEffect)((function(){s(oe())}),[s]),Object(n.useEffect)((function(){c&&(s(oe()),s({type:y}))}),[s,c]);var i=0===t.length;return Object(ye.jsxs)("div",{className:"container",children:[Object(ye.jsxs)("div",{className:"box-container",children:[Object(ye.jsx)("h1",{className:"titulo",children:"Blog-react"}),Object(ye.jsxs)("p",{className:"subtitulo",children:["Mira los post mas recientes o ",Object(ye.jsx)("span",{className:"subtitulo newPost",onClick:function(){s(Ce())},children:"crea un post"})]}),Object(ye.jsx)(Ge.a,{dataLength:t.length,next:function(){return s(ue(a))},hasMore:!0,loader:r&&!i&&Object(ye.jsx)("div",{className:"d-flex justify-content-center",children:Object(ye.jsx)("div",{className:"spinner-border mt-3",role:"status",children:Object(ye.jsx)("span",{className:"sr-only",children:"Loading..."})})}),children:i?Object(ye.jsx)("div",{className:"d-flex justify-content-center",children:Object(ye.jsx)("div",{className:"spinner-border mt-3",role:"status",children:Object(ye.jsx)("span",{className:"sr-only",children:"Loading..."})})}):t.map((function(e){return Object(ye.jsx)(Ue,Object(V.a)({},e),e.id)}))}),!r&&!i&&Object(ye.jsx)("p",{style:{textAlign:"center",marginTop:"10px"},children:Object(ye.jsx)("b",{children:"No hay mas posts para mostrar"})})]}),Object(ye.jsx)(qe,{})]})},Je=a(27),Ve=a.n(Je),Xe=function(){var e=Object(o.c)((function(e){return e.blog})),t=e.posts,a=e.hasNextPage,c=e.postPage,r=e.search,s=Object(o.b)(),i=Object(l.h)(),u=Object(l.g)(),d=Ve.a.parse(i.search).q;Object(n.useEffect)((function(){0===t.length&&s(ae(d))}),[s,t,d]),Object(n.useEffect)((function(){c>=2&&s(ae(d,c))}),[s,c,d]),Object(n.useEffect)((function(){s(oe())}),[s]),Object(n.useEffect)((function(){r||u.push("/react-blog/")}),[r,u]);var j=0===t.length;return Object(ye.jsx)("div",{className:"container",children:Object(ye.jsxs)("div",{className:"box-container",children:[Object(ye.jsxs)("h1",{className:"titulo",children:["Posts encontrados por la busqueda: ",d]}),Object(ye.jsx)(Ge.a,{dataLength:t.length,next:function(){return s(ue(c))},hasMore:!0,loader:a&&!j&&Object(ye.jsx)("div",{className:"d-flex justify-content-center",children:Object(ye.jsx)("div",{className:"spinner-border mt-3",role:"status",children:Object(ye.jsx)("span",{className:"sr-only",children:"Loading..."})})}),children:j?Object(ye.jsx)("div",{className:"d-flex justify-content-center",children:Object(ye.jsx)("div",{className:"spinner-border mt-3",role:"status",children:Object(ye.jsx)("span",{className:"sr-only",children:"Loading..."})})}):t.map((function(e){return Object(ye.jsx)(Ue,Object(V.a)({},e),e.id)}))}),!a&&!j&&Object(ye.jsx)("p",{style:{textAlign:"center",marginTop:"10px"},children:Object(ye.jsx)("b",{children:"No hay mas posts para mostrar"})})]})})},Ze=function(){var e=Object(o.c)((function(e){return e.blog})),t=e.posts,a=e.userPage,c=e.activePostloading,r=e.hasNextPage,s=Object(o.b)(),i=Object(l.h)(),u=Object(l.g)();i.pathname.split("/")[2]&&localStorage.setItem("userId",i.pathname.split("/")[2]);var d=localStorage.getItem("userId")||"";Object(n.useEffect)((function(){0===t.length&&""!==d&&s(te(d))}),[s,t,d]),Object(n.useEffect)((function(){r&&a>=2&&s(te(d,a))}),[s,a,d,r]),Object(n.useEffect)((function(){s(oe())}),[s]),c||(u.push("/react-blog/"),J.a.fire("Error","No existe el usuario buscado","error"));var j=0===t.length;return Object(ye.jsx)("div",{className:"container",children:Object(ye.jsxs)("div",{className:"box-container",children:[Object(ye.jsx)("h1",{className:"titulo",children:"Posts creados por el usuario"}),Object(ye.jsx)("p",{className:"subtitulo",children:"Mira todos los posts creados por este usuario"}),Object(ye.jsx)(Ge.a,{dataLength:t.length,next:function(){return s({type:N,payload:a+1})},hasMore:!0,loader:r&&!j&&Object(ye.jsx)("div",{className:"d-flex justify-content-center",children:Object(ye.jsx)("div",{className:"spinner-border mt-3",role:"status",children:Object(ye.jsx)("span",{className:"sr-only",children:"Loading..."})})}),children:j?Object(ye.jsx)("div",{className:"d-flex justify-content-center",children:Object(ye.jsx)("div",{className:"spinner-border mt-3",role:"status",children:Object(ye.jsx)("span",{className:"sr-only",children:"Loading..."})})}):t.map((function(e){return Object(ye.jsx)(Ue,Object(V.a)({},e),e.id)}))}),!r&&!j&&Object(ye.jsx)("p",{style:{textAlign:"center",marginTop:"10px"},children:Object(ye.jsx)("b",{children:"No hay mas posts para mostrar"})})]})})},$e=(a(80),function(){return Object(ye.jsx)("div",{className:"footer",children:Object(ye.jsx)("p",{children:"Pagina creada por Lautaro Perez Herrera \xa9"})})}),Ke=function(){var e=Object(o.c)((function(e){return e.auth})),t=e.name,a=e.surname,n=e.uid,c=Object(o.b)(),r=Object(l.g)(),s=Object(l.h)(),u=Ve.a.parse(s.search).q,d=Ne({searchText:void 0===u?"":u}),j=Object(ve.a)(d,2),b=j[0],p=j[1],m=b.searchText;return Object(ye.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:[Object(ye.jsx)(i.b,{className:"navbar-brand",to:"/react-blog/",onClick:function(){return c(oe())},children:"Blog-react"}),Object(ye.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavDropdown","aria-controls":"navbarNavDropdown","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(ye.jsx)("span",{className:"navbar-toggler-icon"})}),Object(ye.jsxs)("div",{className:"collapse navbar-collapse ",id:"navbarNavDropdown",children:[Object(ye.jsx)("ul",{className:"navbar-nav "}),Object(ye.jsx)("div",{className:"m-auto"}),Object(ye.jsxs)("form",{className:"form-inline mr-5",onSubmit:function(e){e.preventDefault(),r.push("/react-blog/buscar?q=".concat(m))},children:[Object(ye.jsx)("input",{className:"form-control mr-sm-2",type:"text",placeholder:"Busca un post",autoComplete:"off",name:"searchText",value:m,onChange:p}),Object(ye.jsx)("button",{className:"btn btn-outline-success my-2 my-sm-0",type:"submit",children:"Buscar"})]}),Object(ye.jsx)("ul",{className:"navbar-nav mr-5",children:Object(ye.jsxs)("li",{className:"nav-item dropdown active",children:[Object(ye.jsxs)("span",{className:"nav-link dropdown-toggle",href:"#",id:"navbarDropdownMenuLink",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:[t," ",a]}),Object(ye.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink",children:[Object(ye.jsx)(i.b,{className:"dropdown-item",to:"/react-blog/perfil/".concat(n),children:"Mis posts"}),Object(ye.jsx)("div",{className:"dropdown-divider"}),Object(ye.jsxs)("span",{className:"dropdown-item btn text-danger",onClick:function(){c(Oe())},children:[Object(ye.jsx)("i",{className:"fas fa-sign-out-alt"}),Object(ye.jsx)("span",{children:" Salir"})]})]})]})})]})]})},Qe=function(){return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)(Ke,{}),Object(ye.jsxs)(l.d,{children:[Object(ye.jsx)(l.b,{exact:!0,path:"/react-blog/",component:He}),Object(ye.jsx)(l.b,{exact:!0,path:"/react-blog/post/:id",component:Be}),Object(ye.jsx)(l.b,{exact:!0,path:"/react-blog/perfil/:id",component:Ze}),Object(ye.jsx)(l.b,{exact:!0,path:"/react-blog/buscar",component:Xe}),Object(ye.jsx)(l.a,{to:"/react-blog/"})]}),Object(ye.jsx)($e,{})]})},We=a(28),et=function(e){var t=e.isAuthenticated,a=e.component,n=Object(We.a)(e,["isAuthenticated","component"]);return Object(ye.jsx)("div",{children:Object(ye.jsx)(l.b,Object(V.a)(Object(V.a)({},n),{},{component:function(e){return t?Object(ye.jsx)(a,Object(V.a)({},e)):Object(ye.jsx)(l.a,{to:"/react-blog/auth/login"})}}))})},tt=function(e){var t=e.isAuthenticated,a=e.component,n=Object(We.a)(e,["isAuthenticated","component"]);return Object(ye.jsx)(l.b,Object(V.a)(Object(V.a)({},n),{},{component:function(e){return t?Object(ye.jsx)(l.a,{to:"/react-blog/"}):Object(ye.jsx)(a,Object(V.a)({},e))}}))},at=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.auth})),a=t.checking,c=t.uid;return Object(n.useEffect)((function(){e(function(){var e=Object(j.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("token")){e.next=4;break}return t(fe()),e.abrupt("return");case 4:return e.next=6,m("auth/renew");case 6:return a=e.sent,e.next=9,a.json();case 9:(n=e.sent).ok?(localStorage.setItem("token",n.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(xe({uid:n.uid,name:n.name,surname:n.surname}))):t(fe());case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),a?Object(ye.jsx)("h5",{children:"Espere..."}):Object(ye.jsx)(i.a,{children:Object(ye.jsxs)(l.d,{children:[Object(ye.jsx)(tt,{path:"/react-blog/auth",component:Pe,isAuthenticated:!!c}),Object(ye.jsx)(et,{path:"/react-blog/",component:Qe,isAuthenticated:!!c}),Object(ye.jsx)(l.a,{to:"/auth/login"})]})})},nt=a(42),ct=a(20),rt={checking:!0},st=a(29),ot={posts:[],postPage:1,userPage:1,activePost:null,activeComment:null,isLoading:!1,activePostloading:!0,postNew:!1,search:!0,hasNextPage:!1},it={modalOpen:!1,modalDeleteOpen:!1,modalCommentOpen:!1},lt=Object(ct.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(V.a)(Object(V.a)(Object(V.a)({},e),t.payload),{},{checking:!1});case O:return Object(V.a)(Object(V.a)({},e),{},{checking:!1});case f:return{checking:!1};default:return e}},blog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(V.a)(Object(V.a)({},e),{},{posts:[t.payload].concat(Object(st.a)(e.posts)),postNew:!0});case I:return Object(V.a)(Object(V.a)({},e),{},{posts:t.payload,isLoading:!0,activePostloading:!0,search:!0});case M:var a=t.payload,n=e.posts;return Object(V.a)(Object(V.a)({},e),{},{posts:[].concat(Object(st.a)(n),Object(st.a)(a)),isLoading:!0,activePostloading:!0,search:!0});case A:return Object(V.a)(Object(V.a)({},e),{},{isLoading:!1});case Y:return Object(V.a)(Object(V.a)({},e),{},{activePostloading:!1});case _:return Object(V.a)(Object(V.a)({},e),{},{search:!1});case T:return Object(V.a)(Object(V.a)({},e),{},{posts:[],postPage:1,activePost:null,isLoading:!1,userPage:1});case q:return Object(V.a)(Object(V.a)({},e),{},{activePost:t.payload,isLoading:!0});case g:return Object(V.a)(Object(V.a)({},e),{},{postPage:t.payload});case N:return Object(V.a)(Object(V.a)({},e),{},{userPage:t.payload});case y:return Object(V.a)(Object(V.a)({},e),{},{postNew:!1});case L:return Object(V.a)(Object(V.a)({},e),{},{activePost:t.payload});case D:return Object(V.a)(Object(V.a)({},e),{},{activePost:null});case R:return Object(V.a)(Object(V.a)({},e),{},{activePost:t.payload});case F:return Object(V.a)(Object(V.a)({},e),{},{activeComment:t.payload});case B:return Object(V.a)(Object(V.a)({},e),{},{activeComment:null});case U:return Object(V.a)(Object(V.a)({},e),{},{activePost:t.payload});case G:return Object(V.a)(Object(V.a)({},e),{},{activePost:t.payload,activeComment:null});case E:return Object(V.a)(Object(V.a)({},e),{},{hasNextPage:t.payload});case z:return Object(V.a)(Object(V.a)({},e),{},{posts:[],postPage:1,userPage:1,activePost:null,activeComment:null,isLoading:!1,activePostloading:!0,postNew:!1,search:!0,hasNextPage:!1});default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(V.a)(Object(V.a)({},e),{},{modalOpen:!0});case v:return Object(V.a)(Object(V.a)({},e),{},{modalOpen:!1});case k:return Object(V.a)(Object(V.a)({},e),{},{modalDeleteOpen:!0});case w:return Object(V.a)(Object(V.a)({},e),{},{modalDeleteOpen:!1});case P:return Object(V.a)(Object(V.a)({},e),{},{modalCommentOpen:!0});case C:return Object(V.a)(Object(V.a)({},e),{},{modalCommentOpen:!1});default:return e}}}),ut="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ct.c,dt=Object(ct.d)(lt,ut(Object(ct.a)(nt.a))),jt=function(){return Object(ye.jsx)(o.a,{store:dt,children:Object(ye.jsx)(at,{})})};s.a.render(Object(ye.jsx)(c.a.StrictMode,{children:Object(ye.jsx)(jt,{})}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.2c903055.chunk.js.map